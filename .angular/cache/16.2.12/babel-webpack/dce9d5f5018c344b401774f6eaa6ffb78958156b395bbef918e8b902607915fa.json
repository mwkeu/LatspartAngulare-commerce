{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nexport let ProductDetailsComponent = class ProductDetailsComponent {\n  constructor(route, getData, dataStorage, router, authService, fb) {\n    this.route = route;\n    this.getData = getData;\n    this.dataStorage = dataStorage;\n    this.router = router;\n    this.authService = authService;\n    this.fb = fb;\n    this.storeCartData = [];\n    this.inCart = false;\n    this.showLoginModal = false;\n    this.showRegisterModal = false;\n    this.comments = [];\n    this.averageRating = 0;\n  }\n  ngOnInit() {\n    this.commentForm = this.fb.group({\n      comment: [\"\", [Validators.required]],\n      rating: [0, [Validators.required, Validators.min(1), Validators.max(5)]] // default değer 0 ve minimum 1 maksimum 5 yıldız olsun\n    });\n\n    this.getParamValue = this.route.snapshot.paramMap.get('id');\n    var getVal = this.dataStorage.getCartData();\n    this.storeCartData = getVal ? getVal : [];\n    this.getData.productData.filter(ele => {\n      if (ele.pdId == this.getParamValue) {\n        this.getProductDetails = ele;\n      }\n    });\n    this.storeCartData.filter(ele => {\n      if (ele.pdId == this.getParamValue) {\n        this.inCart = true;\n      }\n    });\n  }\n  addCart(data) {\n    if (this.authService.isLoggedIn()) {\n      data['plusMinusCounter'] = 1;\n      this.storeCartData.push(data);\n      this.dataStorage.storeCartData(this.storeCartData);\n      this.router.navigate(['/cart']);\n    } else {\n      this.authService.resetAuth();\n      this.showLoginModal = true;\n    }\n  }\n  closeModal() {\n    this.showLoginModal = false;\n    this.showRegisterModal = false;\n  }\n  openRegisterModal() {\n    this.showLoginModal = false;\n    this.showRegisterModal = true;\n  }\n  loginSuccess() {\n    this.showLoginModal = false;\n    this.addCart(this.getProductDetails);\n  }\n  registerSuccess() {\n    this.showRegisterModal = false;\n    this.addCart(this.getProductDetails);\n  }\n  addComment() {\n    if (this.commentForm.valid) {\n      const newComment = {\n        user: 'User',\n        comment: this.commentForm.get('comment')?.value,\n        rating: this.commentForm.get('rating')?.value\n      };\n      this.comments.push(newComment);\n      this.updateAverageRating();\n      this.commentForm.reset();\n    }\n  }\n  updateAverageRating() {\n    if (this.comments.length === 0) {\n      this.averageRating = 0;\n      return;\n    }\n    const totalRating = this.comments.reduce((sum, comment) => sum + comment.rating, 0);\n    this.averageRating = totalRating / this.comments.length;\n  }\n  setRating(rating) {\n    this.commentForm.get('rating')?.setValue(rating);\n  }\n  get starArray() {\n    return Array(5).fill(0).map((x, i) => i + 1);\n  }\n};\nProductDetailsComponent = __decorate([Component({\n  selector: 'app-product-details',\n  templateUrl: './product-details.component.html',\n  styleUrls: ['./product-details.component.css']\n})], ProductDetailsComponent);","map":{"version":3,"names":["Component","Validators","ProductDetailsComponent","constructor","route","getData","dataStorage","router","authService","fb","storeCartData","inCart","showLoginModal","showRegisterModal","comments","averageRating","ngOnInit","commentForm","group","comment","required","rating","min","max","getParamValue","snapshot","paramMap","get","getVal","getCartData","productData","filter","ele","pdId","getProductDetails","addCart","data","isLoggedIn","push","navigate","resetAuth","closeModal","openRegisterModal","loginSuccess","registerSuccess","addComment","valid","newComment","user","value","updateAverageRating","reset","length","totalRating","reduce","sum","setRating","setValue","starArray","Array","fill","map","x","i","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\ayvaz\\OneDrive\\Masaüstü\\shoppingcartwithangularproject-main\\src\\app\\product-details\\product-details.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { GetDataService } from '../service/get-data.service';\nimport { DataStorageService } from '../service/data-storage.service';\nimport { AuthService } from '../auth.service';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\n@Component({\n  selector: 'app-product-details',\n  templateUrl: './product-details.component.html',\n  styleUrls: ['./product-details.component.css']\n})\nexport class ProductDetailsComponent implements OnInit {\n  commentForm!:FormGroup;\n\n  constructor(private route: ActivatedRoute, private getData: GetDataService, private dataStorage: DataStorageService,\n    private router: Router, private authService: AuthService ,  private fb: FormBuilder ) {\n\n    }\n\n\n  getParamValue: any;\n  getProductDetails: any;\n  storeCartData: any = [];\n  inCart: boolean = false;\n  showLoginModal: boolean = false;\n  showRegisterModal: boolean = false;\n\n  comments: { user: string; comment: string, rating: number }[] = [];\n  averageRating: number = 0;\n\n  ngOnInit(): void {\n\n     this.commentForm = this.fb.group({\n        comment:[\"\",[Validators.required]],\n          rating: [0, [Validators.required, Validators.min(1), Validators.max(5)]] // default değer 0 ve minimum 1 maksimum 5 yıldız olsun\n      });\n\n\n    this.getParamValue = this.route.snapshot.paramMap.get('id');\n\n     var getVal = this.dataStorage.getCartData()\n\n    this.storeCartData = getVal ? getVal : [];\n\n    this.getData.productData.filter((ele: any) => {\n      if (ele.pdId == this.getParamValue) {\n        this.getProductDetails = ele;\n      }\n    });\n\n    this.storeCartData.filter((ele: any) => {\n      if (ele.pdId == this.getParamValue) {\n        this.inCart = true;\n      }\n    });\n  }\n  addCart(data: any) {\n\n       if(this.authService.isLoggedIn()){\n              data['plusMinusCounter']=1;\n             this.storeCartData.push(data);\n              this.dataStorage.storeCartData(this.storeCartData);\n                  this.router.navigate(['/cart']);\n          }\n      else {\n        this.authService.resetAuth();\n            this.showLoginModal = true;\n    }\n\n  }\n\n    closeModal() {\n     this.showLoginModal = false;\n       this.showRegisterModal = false;\n }\n\n   openRegisterModal() {\n     this.showLoginModal = false;\n      this.showRegisterModal = true;\n\n   }\n\n   loginSuccess() {\n       this.showLoginModal = false;\n      this.addCart(this.getProductDetails)\n    \n      }\n     registerSuccess() {\n      this.showRegisterModal = false;\n       this.addCart(this.getProductDetails)\n      }\n\n    addComment(){\n       if (this.commentForm.valid) {\n             const newComment = {\n             user: 'User',\n           comment: this.commentForm.get('comment')?.value,\n            rating :  this.commentForm.get('rating')?.value\n          };\n      this.comments.push(newComment);\n       this.updateAverageRating();\n       this.commentForm.reset();\n         }\n     }\n\n      updateAverageRating(): void {\n     if (this.comments.length === 0) {\n          this.averageRating = 0;\n        return;\n     }\n       const totalRating = this.comments.reduce((sum, comment) => sum + comment.rating, 0);\n         this.averageRating = totalRating / this.comments.length;\n       }\n\n\n    setRating(rating:number):void{\n\n      this.commentForm.get('rating')?.setValue(rating);\n   }\n    get starArray() {\n          return Array(5).fill(0).map((x, i) => i+1)\n     }\n  \n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}